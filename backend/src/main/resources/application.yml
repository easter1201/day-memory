spring:
  application:
    name: day-memory

  # 기본 프로파일 (설정하지 않으면 dev 사용)
  profiles:
    active: ${SPRING_PROFILES_ACTIVE:dev}

  # Jackson 설정
  jackson:
    serialization:
      write-dates-as-timestamps: false
    deserialization:
      fail-on-unknown-properties: false

  datasource:
    url: ${DB_URL:jdbc:postgresql://localhost:5432/daymemory_dev}
    username: ${DB_USERNAME:postgres}
    password: ${DB_PASSWORD:12345678}
    driver-class-name: org.postgresql.Driver

  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        format_sql: true

  mail:
    host: ${MAIL_HOST:smtp.gmail.com}
    port: ${MAIL_PORT:587}
    username: ${MAIL_USERNAME:}
    password: ${MAIL_PASSWORD:}
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true
            required: true

  servlet:
    multipart:
      enabled: true
      max-file-size: 5MB
      max-request-size: 10MB

file:
  upload-dir: uploads/gifts

jwt:
  secret: ${JWT_SECRET:day-memory-jwt-secret-key-must-be-at-least-256-bits-long-for-HS256-algorithm}
  access-token-expiration: ${JWT_ACCESS_TOKEN_EXPIRATION:3600000}
  refresh-token-expiration: ${JWT_REFRESH_TOKEN_EXPIRATION:604800000}

server:
  port: ${SERVER_PORT:8080}

ai:
  api-key: ${AI_API_KEY:}
  provider: ${AI_PROVIDER:gemini}
  model: ${AI_MODEL:gemini-2.5-flash}

oauth:
  google:
    client-id: ${GOOGLE_CLIENT_ID:}
    client-secret: ${GOOGLE_CLIENT_SECRET:}
  kakao:
    client-id: ${KAKAO_CLIENT_ID:}
    client-secret: ${KAKAO_CLIENT_SECRET:}

naver:
  client-id: ${NAVER_CLIENT_ID:}
  client-secret: ${NAVER_CLIENT_SECRET:}

logging:
  level:
    com.daymemory: DEBUG
    org.hibernate.SQL: DEBUG
    org.hibernate.type.descriptor.sql.BasicBinder: TRACE
  file:
    name: logs/day-memory

# Spring Boot Actuator 설정
management:
  endpoints:
    web:
      exposure:
        # 활성화할 엔드포인트 (운영 환경에서는 제한적으로 노출)
        include: health,info,metrics,prometheus
      base-path: /actuator
  endpoint:
    health:
      # 헬스 체크 상세 정보 표시 (운영 환경에서는 when-authorized 권장)
      show-details: when-authorized
      probes:
        enabled: true
    metrics:
      enabled: true
    info:
      enabled: true
  info:
    # 애플리케이션 정보 표시
    env:
      enabled: true
    java:
      enabled: true
    os:
      enabled: true
  health:
    # 데이터베이스 헬스 체크
    db:
      enabled: true
    # 디스크 공간 헬스 체크
    diskspace:
      enabled: true
      threshold: 10MB
  metrics:
    tags:
      application: ${spring.application.name}
    export:
      prometheus:
        enabled: false

# 애플리케이션 정보 (Actuator /actuator/info 에서 표시)
info:
  app:
    name: Day Memory API
    description: 특별한 날을 기억하고 관리하는 Day Memory 애플리케이션
    version: 1.0.0
    encoding: UTF-8
    java:
      version: 17
